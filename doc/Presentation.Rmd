---
title: "Presentation"
author: "Group 11: Freja Dahl Hede, Maika Jensen, Malene Nørregaard Nielsen,<br> Sofie Rossen, Sofie Theisen Honore"
date: Maj 11 / Maj 12, 2021
output: ioslides_presentation
---
<!-- Et slide består normalvis af en overskrift og to chunks
## Overskrift på Slide, e.g. PCA
1. Et slide hvor filen med output sources (benyt include=FALSE), OBS: skriv full path
2. Et slide med output (bruger ggplotly i de fleste tilfælde
-->

<!-- ## Include png example
```{r, out.width="100%"}
knitr::include_graphics('/cloud/project/results/Manhattan_plot.png')
```
-->

<!-- ## Example on how to source files in 
```{r, include=FALSE}
#source(file = "/cloud/project/R/04_analysis_statisticaltests.R",local = knitr::knit_global())
```
-->

```{r setup, include=FALSE}
# Clear workspace ---------------------------------------------------------
rm(list = ls())
knitr::opts_chunk$set(echo = FALSE)

# Load libraries ----------------------------------------------------------
library(plotly)
library(tidyverse)
library(ggplot2)
library(glue)
library(cowplot)
library(lubridate)
library(egg)
library(grid)
library(DT)
library(knitr)
library(kableExtra)
```

```{r, include = FALSE}
#### 1. Prepare Data for printing ####
my_data_raw_counts <- read_csv(file = "/cloud/project/data/_raw/All_Good_P2_C03-1.csv")
my_data_raw_taxonomy <- read_csv(file = "/cloud/project/data/_raw/All_Good_P2_C03_Taxonomy-1.csv")
my_data_raw_ENV <- read_csv(file = "/cloud/project/data/_raw/ENV_pitlatrine.csv")

my_data_clean_aug <- read_tsv(file = "/cloud/project/data/03_my_data_clean_aug.tsv")
#my_data_clean_aug <- tibble(my_data_clean_aug)

#### 2. Convert to interactive table using DT ####
#d <- my_data_clean_aug %>%
#  datatable() %>%
#  formatStyle(columns = colnames(.), fontSize = '10%')

#d=datatable(my_data_clean_aug,width = '90%', options = list(scrollX = TRUE))


#### 3. Convert to HTML widget using htmlwidgets ####
#path <- paste("./dat.html", sep="")
#saveWidget(as_widget(d), file = path)
```

<!-- Introduction -->
# Introduction 


<!-- Materials and methods-->
# Materials & Methods

## Extract of Raw Data
```{r}
# Random extract of data. Seed is set to 7 to ensure non-0 rows
set.seed(7)
my_data_raw_counts %>%
  select(1:10) %>%
  slice_sample(n = 10) %>%
  kable("html") %>%
  kable_styling(font_size = 12)
```

## Meta data
```{r}
# Extraxt of taxonomy data
my_data_raw_taxonomy %>%
  select(1:7) %>%
  slice_sample(n = 5) %>%
  kable("html") %>%
  kable_styling(font_size = 12)

# Extract of meta data
my_data_raw_ENV %>%
  slice_head(n = 5) %>%
  kable("html") %>%
  kable_styling(font_size = 12)
```

## Data Wrangling
- Left join twice and add site column to get clean augmented dataset
```{r}
my_data_clean_aug %>%
  select(Samples, Taxa, site, everything()) %>%
  slice_head(n = 6) %>%
  select(1:10) %>%
  kable("html") %>%
  kable_styling(font_size = 9)
```

# Results
## Summary statistics

## Violin plots

## Correlations of meta data

## Heatmap with hierarchical clustering

## Heatmap with total bar

## PCA 

## KMeans 

## T-test
```{r, out.width='100%'}
knitr::include_graphics('/cloud/project/results/Manhattan_plot.png')
```
---
```{r, out.width='100%'}
knitr::include_graphics('/cloud/project/results/Error_bar_plot.png')
```
---
```{r, out.width='100%'}
knitr::include_graphics('/cloud/project/results/Error_bar_plot_zoom.png')
```

## Sample distributions (Tanzania and Vietnam compared)

## Correlations between significant bacteria

## Correlations between significant bacteria and meta data

## Distributions of significant bacteria based on meta data

# Discussion










# Noget gammelt, jeg ikke tør slette (hvis vi skal bruge noget med plotly senere)
## Distribution of Temperature and pH of the samples
```{r, include=FALSE}
#source(file = "/cloud/project/R/04_analysis_statisticaltests.R",local = knitr::knit_global())
```

```{r}
#ggplotly(depth_dist)
#cowplot::plot_grid(temp_dens, pH_dens, align = "h", ncol = 2, rel_heights = c(0.50, 0.50))
#egg::ggarrange(depth_dist, latrine_dist, heights = c(0.50, 0.50))

#grid.newpage()
#grid.draw(rbind(ggplotGrob(depth_dist), ggplotGrob(latrine_dist), size = "last"))


#subplot(depth_dist, latrine_dist, shareX = FALSE, heights = 0.8)
#sub = subplot(depth_dist, latrine_dist, margin=0.05)
#ggplotly(sub)
```
